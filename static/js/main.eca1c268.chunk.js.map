{"version":3,"sources":["assets/images/avatar.png","assets/audio/hitBottomMessageLog.m4a","assets/audio/hitTopMessageLog.m4a","assets/audio/notification.m4a","assets/audio/receiveMessage.m4a","assets/audio/selection.m4a","assets/audio/sendMessage.m4a","assets/audio/themeSong.m4a","assets/audio/themeSong2.m4a","services/stateService.js","pages/Home/Home.container.js","components/MessageBubble/MessageBubble.container.js","components/MessageBubble/MessageBubble.styles.js","components/MessageBubble/MessageBubble.view.js","components/MessageBubble/index.js","components/MessageGroup/MessageGroup.container.js","components/MessageGroup/MessageGroup.styles.js","components/MessageGroup/MessageGroup.view.js","components/MessageGroup/index.js","components/Chatlog/Chatlog.container.js","components/Chatlog/Chatlog.styles.js","components/Chatlog/Chatlog.view.js","components/Chatlog/index.js","components/Avatar/Avatar.container.js","components/Avatar/Avatar.styles.js","components/Avatar/Avatar.view.js","components/Avatar/index.js","components/Header/Header.container.js","components/Header/Header.styles.js","components/Header/Header.view.js","components/Header/index.js","components/Typing/Typing.container.js","components/Typing/Typing.styles.js","components/Typing/Typing.view.js","components/Typing/index.js","components/OptionsLayout/OptionsLayout.container.js","components/OptionsLayout/OptionsLayout.styles.js","components/OptionsLayout/OptionsLayout.view.js","components/OptionsLayout/index.js","components/Button/Button.container.js","components/Button/Button.styles.js","services/audioService.js","components/Button/Button.view.js","components/Button/index.js","pages/Home/Home.styles.js","pages/Home/Home.view.js","pages/Home/index.js","index.js","App.js"],"names":["module","exports","useGlobalState","createGlobalState","currentState","type","data","messageId","chatlog","View","props","useState","username","avatar","src","avatarImage","otherUser","setCurrentState","setChatlog","previousStateType","setPreviousStateType","setTyping","isFriendTyping","appendMessage","msg","newChatlog","incomingMessage","incomingMessages","console","log","responseOptions","length","Error","delay","setTimeout","typingDuration","messages","some","r","match","endId","sender","text","map","m","goToEnding","options","dir","enterWaitingState","onOptionSelected","destinations","sendableOptions","paths","destination","message","isTyping","Bubble","styled","div","alignRight","Container","FriendMessageGroup","SelfMessageGroup","ChatServerMessageGroup","ChatServerMessage","messageGroup","style","padding","paddingRight","i","MessageBubble","key","conversation","reduce","acc","curr","push","StyledChatlog","Chatlog","scrollToBottom","messagesEnd","scrollIntoView","behavior","this","MessageGroup","Typing","float","clear","ref","el","React","Component","AvatarImage","img","image","user","HeaderLayout","UsernameText","h1","Avatar","keyFrameAnimation","keyframes","StyledTiContainer","StyledTiBlock","StyledTiDot","StyledOptionsLayout","Button","optionId","marginBottom","marginTop","content","onClick","StyledButton","button","sounds","hitBottomMessage","UIfx","hitBottomMessageLog","volume","throttleMs","hitTopMessage","hitTopMessageLog","notification","receiveMessage","selection","sendMessage","SOUNDS","controller","HowlerSoundController","loader","getLoader","add","themeSong2","once","playBackground","load","play","PageLayout","Layout","Header","OptionsLayout","ReactDOM","render","Home","document","getElementById"],"mappings":"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","file":"static/js/main.eca1c268.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avatar.5a71d76f.png\";","module.exports = __webpack_public_path__ + \"static/media/hitBottomMessageLog.846763c2.m4a\";","module.exports = __webpack_public_path__ + \"static/media/hitTopMessageLog.fc2d7e8b.m4a\";","module.exports = __webpack_public_path__ + \"static/media/notification.b57fdabf.m4a\";","module.exports = __webpack_public_path__ + \"static/media/receiveMessage.8cc0cd6e.m4a\";","module.exports = __webpack_public_path__ + \"static/media/selection.20d0835e.m4a\";","module.exports = __webpack_public_path__ + \"static/media/sendMessage.dbada8f4.m4a\";","module.exports = __webpack_public_path__ + \"static/media/themeSong.1461d7d5.m4a\";","module.exports = __webpack_public_path__ + \"static/media/themeSong2.5e49bb5f.m4a\";","import { createGlobalState } from 'react-hooks-global-state';\n\nconst { useGlobalState } = createGlobalState({\n  currentState: {\n    type: 'waiting',\n    data: {\n      messageId: '1'\n    }\n  },\n  chatlog: [{\n    \"sender\": \"chat\",\n    \"type\": \"text\",\n    \"data\": {\n      \"text\": \"Today\"\n    }\n  }]\n});\n\nexport {\n  useGlobalState,\n};\n","import React, { useState, useEffect } from 'react';\nimport { avatarImage } from '../../assets/images';\nimport { useGlobalState } from '../../services/stateService';\nimport { incomingMessages, sendableOptions } from '../../assets/messages';\n\nexport default ({ View, ...props }) => {\n  const [otherUser, setOtherUser] = useState({\n    username: 'Les',\n    avatar: {\n      src: avatarImage,\n    },\n  });\n\n  const [currentState, setCurrentState] = useGlobalState('currentState')\n  let [chatlog, setChatlog] = useGlobalState('chatlog')\n\n  const [previousStateType, setPreviousStateType] = useState('')\n\n  const setTyping = isFriendTyping => setCurrentState({\n    ...currentState,\n    data: {\n      ...currentState.data,\n      isFriendTyping,\n    }\n  });\n\n  const setReadyState = options => {\n    console.log('SETTING READY STATE')\n    console.dir(options)\n    setCurrentState({\n      type: 'ready',\n      data: {\n        options\n      }\n    })\n  }\n\n  const appendMessage = (msg) => {\n    const newChatlog = [\n      ...chatlog,\n      msg\n    ];\n    setChatlog(newChatlog)\n    chatlog = newChatlog;\n  }\n\n  const setWaitingState = messageId => {\n    const destinations = sendableOptions[messageId].paths\n\n    console.log('setWaitingState, messageId: ' +  destinations[0].destination)\n\n    appendMessage(sendableOptions[messageId].message)\n\n    setCurrentState({\n      type: 'waiting',\n      data: {\n        messageId: destinations[0].destination\n      }\n    })\n  }\n\n  // Special code for each ending\n  const goToEnding = endId => {\n    switch (endId) {\n      case '_ENDING_1_':\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Disconnected.' }\n        }), 1000)\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Reload the page to play again.' }\n        }), 2000)\n        break;\n\n      case '_ENDING_2_':\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Disconnected.' }\n        }), 1000)\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Reload the page to play again.' }\n        }), 2000)\n        break;\n\n      case '_ENDING_4_':\n        appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Disconnected.' }\n        })\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'This user has blocked you.' }\n        }), 1400)\n        setTimeout(() => {\n          const newChatlog = chatlog.map(m => m.sender === 'friend'\n            ? { ...m, data: { text: 'Message unavailable' }}\n            : m);\n          setChatlog(newChatlog);\n          chatlog = newChatlog;\n        }, 2000)\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Reload the page to play again.' }\n        }), 4000)\n        break;\n\n      default:\n        throw new Error('Invalid ending ID ' + endId);\n    }\n  }\n\n  const enterReadyState = () => { }\n\n  const enterWaitingState = () => {\n    const incomingMessage = incomingMessages[currentState.data.messageId];\n\n    console.log('enterWaitingState, messageId: ' + currentState.data.messageId);\n    if (!incomingMessage.responseOptions || incomingMessage.responseOptions.length < 2) {\n      throw new Error('Invalid response options in incoming message ' + currentState.data.messageId);\n    }\n\n    let delay = 0;\n    for (const msg of incomingMessage.messages) {\n      setTimeout(() => setTyping(true), (delay + msg.delay) * 1000);\n      setTimeout(() => setTyping(false), (delay + msg.delay + msg.typingDuration) * 1000);\n      setTimeout(() => appendMessage(msg), (delay + msg.delay + msg.typingDuration) * 1000);\n      delay += msg.delay + msg.typingDuration;\n    }\n\n    if (incomingMessage.responseOptions.some(r => r.match(/_ENDING_/g))) {\n      setTimeout(() => {\n        console.log('Going to ending', incomingMessage.responseOptions[0])\n        goToEnding(incomingMessage.responseOptions[0]);\n      }, delay * 1000);\n    } else {\n      setTimeout(() => setReadyState(incomingMessage.responseOptions), delay * 1000)\n    }\n  }\n\n  if (currentState.type !== previousStateType) {\n    setPreviousStateType(currentState.type);\n\n    switch (currentState.type) {\n      case 'waiting':\n        enterWaitingState();\n        break;\n      case 'ready':\n        enterReadyState();\n        break;\n      default:\n        break;\n    }\n  }\n\n  return (\n    <View {...props}\n      chatlog={chatlog}\n      otherUser={otherUser}\n      options={currentState.data.options || []}\n      onOptionSelected={setWaitingState}\n      isTyping={currentState.data.isFriendTyping} />\n  );\n};\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const Bubble = styled.div`\nbackground-color: ;\n  background-color: ${({alignRight}) => alignRight ? 'rgb(123,182,211)' : '#dedcde'};\n  margin: 0.35em;\n  padding: 1em;\n  display: inline-block;\n  color: ${({alignRight}) => alignRight ? 'rgb(255,255,255)' : 'rgb(110, 110, 110)'};\n  border-radius: 16px;\n  font-size: 18px;\n  -webkit-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n  -moz-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n  box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n`;\n\nexport const Container = styled.div`\n  position: relative;\n  max-width: 75%;\n  :not(:first-child) > div {\n    border-top-right-radius: ${({alignRight}) => alignRight ? '0' : '16px'};\n    border-top-left-radius: ${({alignRight}) => alignRight ? '16px' : '0'};\n  }\n  :not(:last-child) > div {\n    border-bottom-right-radius: ${({alignRight}) => alignRight ? '0' : '16px'};\n    border-bottom-left-radius: ${({alignRight}) => alignRight ? '16px' : '0'};\n  }\n`;\n","// import React from 'react';\n\n/*\ntype: 'text' || 'image',\ndata: {\n  message: '',\n  image: '',\n}\n */\n\n// export default ({ message }) => (\n//   <div>{JSON.stringify(message)}</div>\n// );\n\nimport React from 'react';\nimport { Bubble, Container } from './MessageBubble.styles';\n\nexport default ({ text, alignRight }) => (\n  <Container alignRight={alignRight}>\n    <Bubble alignRight={alignRight}>{text}</Bubble>\n  </Container>\n);\n","import React from 'react';\nimport Container from './MessageBubble.container';\nimport View from './MessageBubble.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const FriendMessageGroup = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-end;\n  padding: 0.75em;\n`;\n\nexport const SelfMessageGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n  padding: 1em;\n`;\n\nexport const ChatServerMessageGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 1em;\n  color: rgb(110,110,110);\n`;\n\nexport const ChatServerMessage = styled.div`\nmargin: 16px;\n`;\n","import React from 'react';\nimport { MessageBubble } from '../';\nimport {\n  ChatServerMessage,\n  ChatServerMessageGroup,\n  FriendMessageGroup,\n  SelfMessageGroup\n} from './MessageGroup.styles';\n\nexport default ({ messageGroup }) => {\n  switch (messageGroup.sender) {\n    case 'friend':\n      return <FriendMessageGroup>\n        <div style={{ padding: '0.125em', paddingRight: '0.75em' }}>\n          {/*<Avatar />*/}\n        </div>\n        <div>\n          {\n            messageGroup.messages.map((message, i) => (\n              <MessageBubble\n                key={i}\n                text={message.text}\n              />\n            ))\n          }\n        </div>\n      </FriendMessageGroup>\n    case 'self':\n      return <SelfMessageGroup>\n        {\n          messageGroup.messages.map((message, i) => (\n            <MessageBubble\n              key={i}\n              text={message.text}\n              alignRight\n            />\n          ))\n        }\n      </SelfMessageGroup>\n    case 'chat':\n      return <ChatServerMessageGroup>\n      {\n        messageGroup.messages.map((message, i) => (\n          <ChatServerMessage key={i}>{message.text}</ChatServerMessage>\n        ))\n      }\n      </ChatServerMessageGroup>\n    default: return <div></div>;\n  }\n}\n","import React from 'react';\nimport Container from './MessageGroup.container';\nimport View from './MessageGroup.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, chatlog, ...props }) => {\n  const conversation = chatlog.reduce((acc, curr) => {\n    if (acc.length <= 0 || acc[acc.length - 1].sender !== curr.sender) {\n      acc.push({\n        sender: curr.sender,\n        messages: []\n      });\n    }\n\n    // TODO: handle images\n    const text = curr.data.text;\n    if (text) {\n      acc[acc.length - 1].messages.push({ text });\n    }\n\n    return acc;\n  }, []);\n\n  return (\n    <View {...props} conversation={conversation} />\n  )\n};\n","import styled from 'styled-components';\n\nexport const StyledChatlog = styled.div`\n  flex: 1;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n","import React from 'react';\nimport {\n  MessageGroup,\n  Typing,\n} from '../';\nimport { StyledChatlog } from './Chatlog.styles';\n\nexport default class Chatlog extends React.Component {\n  render() {\n    return <StyledChatlog>\n      {\n        this.props.conversation.map((messageGroup, i) => (\n          <MessageGroup messageGroup={messageGroup} key={i} />\n        ))\n      }\n      {\n        this.props.isTyping ? <Typing /> : ''\n      }\n      <div style={{ float:\"left\", clear: \"both\" }}\n        ref={(el) => { this.messagesEnd = el; }}>\n      </div>\n    </StyledChatlog>\n  }\n\n  scrollToBottom = () => {\n    this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n  }\n\n  componentDidMount() {\n    this.scrollToBottom();\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom();\n  }\n};\n","import React from 'react';\nimport Container from './Chatlog.container';\nimport View from './Chatlog.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const AvatarImage = styled.img`\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n`;\n","import React from 'react';\nimport { AvatarImage } from './Avatar.styles';\n\nexport default ({ image }) => (\n  <div>\n    <AvatarImage src={image.src} />\n  </div>\n);\n","import React from 'react';\nimport Container from './Avatar.container';\nimport View from './Avatar.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, user: { avatar, username }, ...props }) => (\n  <View {...props} avatar={avatar} username={username} />\n);\n","import styled from 'styled-components';\n\nexport const HeaderLayout = styled.div`\n  height: 96px;\n  width: 100%;\n  border-bottom: 1px solid rgba( 0, 0, 0, 0.2 );\n  display: flex;\n  align-items: center;\n  padding: 1em;\n  box-shadow: 0px 0px 4px 2px rgba( 0, 0, 0, 0.2 );\n`;\n\nexport const UsernameText = styled.h1`\n  margin-left: 0.5em;\n  color: rgb(110, 110, 110);\n`;\n","import React from 'react';\nimport { Avatar } from '../';\nimport { HeaderLayout, UsernameText } from './Header.styles';\n\nexport default ({ avatar, username }) => (\n  <HeaderLayout>\n    <Avatar image={avatar} />\n    <UsernameText>{username}</UsernameText>\n  </HeaderLayout>\n);\n","import React from 'react';\nimport Container from './Header.container';\nimport View from './Header.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled, { keyframes } from 'styled-components';\n\n\nconst keyFrameAnimation = keyframes`\n  0% {\n    -webkit-transform:translateY(0px)\n  }\n  28% {\n    -webkit-transform:translateY(-10px)\n  }\n  44% {\n    -webkit-transform:translateY(0px)\n  }\n`;\n\nexport const StyledTiContainer = styled.div`\n  margin-left: 32px;\n  margin-bottom: 16px;\n`;\n\nexport const StyledTiBlock = styled.div`\n  align-items: center;\n  display: flex;\n  height: 16px;\n`;\n\nexport const StyledTiDot = styled.div`\n  -webkit-animation: ${keyFrameAnimation} 1.5s infinite ease-in-out;\n  border-radius: 50%;\n  display: inline-block;\n  height: 16px;\n  margin-right: 4px;\n  width: 16px;\n  background-color: rgb(85, 84, 99);\n  &:nth-child(1) {\n    -webkit-animation-delay: 200ms;\n  }\n  &:nth-child(2) {\n    -webkit-animation-delay: 300ms;\n  }\n  &:nth-child(3) {\n    -webkit-animation-delay: 400ms;\n  }\n`;\n","import React from 'react';\nimport { StyledTiContainer, StyledTiBlock, StyledTiDot } from './Typing.styles';\n\nexport default () => (\n  <StyledTiContainer>\n    <StyledTiBlock>\n      <StyledTiDot />\n      <StyledTiDot />\n      <StyledTiDot />\n    </StyledTiBlock>\n  </StyledTiContainer>\n);\n","import React from 'react';\nimport Container from './Typing.container';\nimport View from './Typing.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const StyledOptionsLayout = styled.div`\n  height: 200px;\n  width: 100%;\n  // border-top: 1px solid rgb(85, 84, 99);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: 1em;\n  box-shadow: 0px 0px 4px 2px rgba( 0, 0, 0, 0.2 );\n`;\n","import React from 'react';\nimport { StyledOptionsLayout } from './OptionsLayout.styles';\nimport { Button } from '../';\n\nexport default ({options, onOptionSelected}) => {\n  console.log('rendering OptionsLayoutView')\n  console.dir(options)\n  return options.length >= 2\n    ? <StyledOptionsLayout>\n      <Button optionId={options[0]} onOptionSelected={onOptionSelected} style={{ marginBottom: '0.5em' }} />\n      <Button optionId={options[1]} onOptionSelected={onOptionSelected} style={{ marginTop: '0.5em' }} />\n    </StyledOptionsLayout>\n  : <StyledOptionsLayout></StyledOptionsLayout>\n}\n","import React from 'react';\nimport Container from './OptionsLayout.container';\nimport View from './OptionsLayout.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\nimport { sendableOptions } from '../../assets/messages';\n\nexport default ({ View, optionId, onOptionSelected, ...props }) => {\n  console.log('rendering button container, optionId: ', optionId)\n  console.dir(sendableOptions)\n  return (\n    // TODO: support images\n    <View\n      content={sendableOptions[optionId].message.data.text}\n      onClick={() => onOptionSelected(optionId)}\n      {...props} />\n  );\n}\n","import styled from 'styled-components';\n\nexport const StyledButton = styled.button`\n  transition: all 0.25s;\n  width: 100%;\n  height: 50%;\n  color: rgb(123,182,211);\n  background-color: rgb(240, 240, 240);\n  border: 3px solid rgb(123,182,211);\n  border-radius: 48px;\n  font-weight: bold;\n  font-size: 20px;\n  &:focus {\n    outline: none;\n  }\n  cursor: pointer;\n  &:hover {\n    background-color: rgb(123,182,211);\n    color: white;\n    -webkit-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n    -moz-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n    box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n  }\n`;\n","import UIfx from 'uifx';\nimport { HowlerSoundController } from 'howler-sound-controller';\n\nimport {\n  hitBottomMessageLog,\n  hitTopMessageLog,\n  notification,\n  receiveMessage,\n  selection,\n  sendMessage,\n  // themeSong,\n  themeSong2,\n} from '../assets/audio';\n\nconst sounds = {\n  hitBottomMessage:  new UIfx(\n    hitBottomMessageLog,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  hitTopMessage: new UIfx(\n    hitTopMessageLog,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  notification: new UIfx(\n    notification,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  receiveMessage: new UIfx(\n    receiveMessage,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  selection: new UIfx(\n    selection,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  sendMessage: new UIfx(\n    sendMessage,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n};\n\n// const musics = {\n//   themeSong: new UIfx(\n//     themeSong,\n//     {\n//       volume: 0.4,\n//       throttleMs: 100,\n//     },\n//   ),\n// };\n\nexport const SOUNDS = {\n  HIT_BOTTOM_MESSAGE: 'hitBottomMessage',\n  HIT_TOP_MESSAGE: 'hitTopMessage',\n  NOTIFICATION: 'notification',\n  RECEIVE_MESSAGE: 'receiveMessage',\n  SELECTION: 'selection',\n  SEND_MESSAGE: 'sendMessage',\n};\n\nexport const MUSICS = {\n  THEME: 'themeSong',\n  THEME2: 'themeSong2',\n};\n\nexport const playSound = sound => {\n  sounds[sound].play();\n};\n\n// export const playMusic = music => {\n//   musics[music].play();\n// };\n\nconst controller = HowlerSoundController;\nconst loader = controller.getLoader();\n\nloader\n  .add('themeSong2', { src: [themeSong2], volume: 0.2 });\n\nloader.once('loaded', () => {\n  controller.playBackground('themeSong2');\n});\n\nloader.load();\n","import React from 'react';\nimport { StyledButton } from './Button.styles';\nimport { SOUNDS, playSound } from '../../services/audioService';\n\nexport default ({ content, onClick, style }) => (\n  <StyledButton\n    style={style}\n    onClick={() => {\n      playSound(SOUNDS.SEND_MESSAGE);\n      onClick();\n    }}\n  >\n    {content}\n  </StyledButton>\n);\n","import React from 'react';\nimport Container from './Button.container';\nimport View from './Button.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import styled from 'styled-components';\n\nexport const PageLayout = styled.div`\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const Layout = styled.div`\n  height: 100%;\n  max-width: 80ch;\n  width: 100%;\n  box-shadow: 0px 0px 4px 2px rgba( 0, 0, 0, 0.2 );\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background-color: rgb(240, 240, 240);\n`;\n","import React from 'react';\nimport { Chatlog, Header, OptionsLayout } from '../../components';\nimport { PageLayout, Layout } from './Home.styles';\n\nexport default ({ otherUser, chatlog, options, onOptionSelected, isTyping }) => (\n  <PageLayout>\n    <Layout>\n      <Header user={otherUser} />\n      <Chatlog chatlog={chatlog} isTyping={isTyping} />\n      <OptionsLayout options={options} onOptionSelected={onOptionSelected} />\n    </Layout>\n  </PageLayout>\n);\n","import React from 'react';\nimport Container from './Home.container';\nimport View from './Home.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport 'normalize.css';\nimport './index.css';\nimport { Home } from './pages';\n// Even though it's not being used we should keep it here so that it initialises the state.\nimport { useGlobalState } from './services/stateService';\n\nexport default () => (\n  <Home />\n);\n"],"sourceRoot":""}