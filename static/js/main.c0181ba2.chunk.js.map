{"version":3,"sources":["assets/images/avatar.png","assets/audio/hitBottomMessageLog.m4a","assets/audio/hitTopMessageLog.m4a","assets/audio/notification.m4a","assets/audio/receiveMessage.m4a","assets/audio/selection.m4a","assets/audio/sendMessage.m4a","assets/audio/GGJ_longer_instrumental.m4a","services/stateService.js","services/audioService.js","pages/Home/Home.container.js","components/MessageBubble/MessageBubble.container.js","components/MessageBubble/MessageBubble.styles.js","components/MessageBubble/MessageBubble.view.js","components/MessageBubble/index.js","components/MessageGroup/MessageGroup.container.js","components/MessageGroup/MessageGroup.styles.js","components/MessageGroup/MessageGroup.view.js","components/MessageGroup/index.js","components/Chatlog/Chatlog.container.js","components/Chatlog/Chatlog.styles.js","components/Chatlog/Chatlog.view.js","components/Chatlog/index.js","components/Avatar/Avatar.container.js","components/Avatar/Avatar.styles.js","components/Avatar/Avatar.view.js","components/Avatar/index.js","components/Header/Header.container.js","components/Header/Header.styles.js","components/Header/Header.view.js","components/Header/index.js","components/Typing/Typing.container.js","components/Typing/Typing.styles.js","components/Typing/Typing.view.js","components/Typing/index.js","components/OptionsLayout/OptionsLayout.container.js","components/OptionsLayout/OptionsLayout.styles.js","components/OptionsLayout/OptionsLayout.view.js","components/OptionsLayout/index.js","components/Button/Button.container.js","components/Button/Button.styles.js","components/Button/Button.view.js","components/Button/index.js","pages/Home/Home.styles.js","pages/Home/Home.view.js","pages/Home/index.js","index.js","App.js"],"names":["module","exports","useGlobalState","createGlobalState","currentState","type","data","messageId","chatlog","messageHistory","sounds","hitBottomMessage","UIfx","hitBottomMessageLog","volume","throttleMs","hitTopMessage","hitTopMessageLog","notification","receiveMessage","selection","sendMessage","SOUNDS","playSound","sound","play","controller","HowlerSoundController","loader","getLoader","add","src","themeSong","once","playBackground","load","View","props","useState","username","avatar","avatarImage","otherUser","setCurrentState","setChatlog","previousStateType","setPreviousStateType","setTyping","isFriendTyping","appendMessage","msg","newChatlog","incomingMessage","incomingMessages","console","log","responseOptions","length","Error","delay","setTimeout","typingDuration","text","messages","some","r","match","endId","sender","map","m","goToEnding","options","dir","enterWaitingState","onOptionSelected","destinations","sendableOptions","paths","destination","message","isTyping","Bubble","styled","div","alignRight","Paragraph","Container","split","i","key","FriendMessageGroup","SelfMessageGroup","ChatServerMessageGroup","ChatServerMessage","messageGroup","style","padding","paddingRight","MessageBubble","conversation","reduce","acc","curr","push","StyledChatlog","Chatlog","scrollToBottom","messagesEnd","scrollIntoView","behavior","this","MessageGroup","Typing","float","clear","ref","el","React","Component","AvatarImage","img","image","user","HeaderLayout","UsernameText","h1","Avatar","keyFrameAnimation","keyframes","StyledTiContainer","StyledTiBlock","StyledTiDot","StyledOptionsLayout","Button","optionId","marginBottom","marginTop","content","onClick","StyledButton","button","PageLayout","Layout","Header","OptionsLayout","ReactDOM","render","Home","document","getElementById"],"mappings":"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","file":"static/js/main.c0181ba2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/avatar.52903643.png\";","module.exports = __webpack_public_path__ + \"static/media/hitBottomMessageLog.846763c2.m4a\";","module.exports = __webpack_public_path__ + \"static/media/hitTopMessageLog.fc2d7e8b.m4a\";","module.exports = __webpack_public_path__ + \"static/media/notification.b57fdabf.m4a\";","module.exports = __webpack_public_path__ + \"static/media/receiveMessage.8cc0cd6e.m4a\";","module.exports = __webpack_public_path__ + \"static/media/selection.20d0835e.m4a\";","module.exports = __webpack_public_path__ + \"static/media/sendMessage.dbada8f4.m4a\";","module.exports = __webpack_public_path__ + \"static/media/GGJ_longer_instrumental.7960ca90.m4a\";","import { createGlobalState } from 'react-hooks-global-state';\nimport { messageHistory } from '../assets/messages';\n\nconst { useGlobalState } = createGlobalState({\n  currentState: {\n    type: 'waiting',\n    data: {\n      messageId: '1'\n    }\n  },\n  chatlog: messageHistory\n});\n\nexport {\n  useGlobalState,\n};\n","import UIfx from 'uifx';\nimport { HowlerSoundController } from 'howler-sound-controller';\n\nimport {\n  hitBottomMessageLog,\n  hitTopMessageLog,\n  notification,\n  receiveMessage,\n  selection,\n  sendMessage,\n  themeSong,\n} from '../assets/audio';\n\nconst sounds = {\n  hitBottomMessage:  new UIfx(\n    hitBottomMessageLog,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  hitTopMessage: new UIfx(\n    hitTopMessageLog,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  notification: new UIfx(\n    notification,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  receiveMessage: new UIfx(\n    receiveMessage,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  selection: new UIfx(\n    selection,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n  sendMessage: new UIfx(\n    sendMessage,\n    {\n      volume: 1,\n      throttleMs: 100,\n    },\n  ),\n};\n\n// const musics = {\n//   themeSong: new UIfx(\n//     themeSong,\n//     {\n//       volume: 0.4,\n//       throttleMs: 100,\n//     },\n//   ),\n// };\n\nexport const SOUNDS = {\n  HIT_BOTTOM_MESSAGE: 'hitBottomMessage',\n  HIT_TOP_MESSAGE: 'hitTopMessage',\n  NOTIFICATION: 'notification',\n  RECEIVE_MESSAGE: 'receiveMessage',\n  SELECTION: 'selection',\n  SEND_MESSAGE: 'sendMessage',\n};\n\nexport const playSound = sound => {\n  sounds[sound].play();\n};\n\n// export const playMusic = music => {\n//   musics[music].play();\n// };\n\nconst controller = HowlerSoundController;\nconst loader = controller.getLoader();\n\nloader\n  .add('themeSong', { src: [themeSong], volume: 0.2 });\n\nloader.once('loaded', () => {\n  controller.playBackground('themeSong');\n});\n\nloader.load();\n","import React, { useState, useEffect } from 'react';\nimport { avatarImage } from '../../assets/images';\nimport { useGlobalState } from '../../services/stateService';\nimport { incomingMessages, sendableOptions } from '../../assets/messages';\nimport { playSound, SOUNDS } from '../../services/audioService';\n\nexport default ({ View, ...props }) => {\n  const [otherUser, setOtherUser] = useState({\n    username: 'Les',\n    avatar: {\n      src: avatarImage,\n    },\n  });\n\n  const [currentState, setCurrentState] = useGlobalState('currentState')\n  let [chatlog, setChatlog] = useGlobalState('chatlog')\n\n  const [previousStateType, setPreviousStateType] = useState('')\n\n  const setTyping = isFriendTyping => setCurrentState({\n    ...currentState,\n    data: {\n      ...currentState.data,\n      isFriendTyping,\n    }\n  });\n\n  const setReadyState = options => {\n    console.log('SETTING READY STATE')\n    console.dir(options)\n    setCurrentState({\n      type: 'ready',\n      data: {\n        options\n      }\n    })\n  }\n\n  const appendMessage = (msg) => {\n    const newChatlog = [\n      ...chatlog,\n      msg\n    ];\n    setChatlog(newChatlog)\n    chatlog = newChatlog;\n  }\n\n  const setWaitingState = messageId => {\n    const destinations = sendableOptions[messageId].paths\n\n    console.log('setWaitingState, messageId: ' +  destinations[0].destination)\n\n    appendMessage(sendableOptions[messageId].message)\n\n    setCurrentState({\n      type: 'waiting',\n      data: {\n        messageId: destinations[0].destination\n      }\n    })\n  }\n\n  // Special code for each ending\n  const goToEnding = endId => {\n    switch (endId) {\n      case '_ENDING_1_':\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Disconnected.' }\n        }), 1000)\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Reload the page to play again.' }\n        }), 2000)\n        break;\n\n      case '_ENDING_2_':\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Disconnected.' }\n        }), 1000)\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Reload the page to play again.' }\n        }), 2000)\n        break;\n\n      case '_ENDING_4_':\n        appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Disconnected.' }\n        })\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'This user has blocked you.' }\n        }), 1400)\n        setTimeout(() => {\n          const newChatlog = chatlog.map(m => m.sender === 'friend'\n            ? { ...m, data: { text: 'Message unavailable' }}\n            : m);\n          setChatlog(newChatlog);\n          chatlog = newChatlog;\n        }, 2000)\n        setTimeout(() => appendMessage({\n          sender: 'chat',\n          type: 'text',\n          data: { text: 'Reload the page to play again.' }\n        }), 4000)\n        break;\n\n      default:\n        throw new Error('Invalid ending ID ' + endId);\n    }\n  }\n\n  const enterReadyState = () => { }\n\n  const enterWaitingState = () => {\n    const incomingMessage = incomingMessages[currentState.data.messageId];\n\n    console.log('enterWaitingState, messageId: ' + currentState.data.messageId);\n    if (!incomingMessage.responseOptions || incomingMessage.responseOptions.length < 2) {\n      throw new Error('Invalid response options in incoming message ' + currentState.data.messageId);\n    }\n\n    let delay = 0;\n    for (const msg of incomingMessage.messages) {\n      setTimeout(() => setTyping(true), (delay + msg.delay) * 1000);\n      setTimeout(() => setTyping(false), (delay + msg.delay + msg.typingDuration) * 1000);\n      setTimeout(() => {\n        if (msg.data.text) {\n          playSound(SOUNDS.RECEIVE_MESSAGE)\n        }\n        appendMessage(msg)\n      }, (delay + msg.delay + msg.typingDuration) * 1000);\n      delay += msg.delay + msg.typingDuration;\n    }\n\n    if (incomingMessage.responseOptions.some(r => r.match(/_ENDING_/g))) {\n      setTimeout(() => {\n        console.log('Going to ending', incomingMessage.responseOptions[0])\n        goToEnding(incomingMessage.responseOptions[0]);\n      }, delay * 1000);\n    } else {\n      setTimeout(() => setReadyState(incomingMessage.responseOptions), delay * 1000)\n    }\n  }\n\n  if (currentState.type !== previousStateType) {\n    setPreviousStateType(currentState.type);\n\n    switch (currentState.type) {\n      case 'waiting':\n        enterWaitingState();\n        break;\n      case 'ready':\n        enterReadyState();\n        break;\n      default:\n        break;\n    }\n  }\n\n  return (\n    <View {...props}\n      chatlog={chatlog}\n      otherUser={otherUser}\n      options={currentState.data.options || []}\n      onOptionSelected={setWaitingState}\n      isTyping={currentState.data.isFriendTyping} />\n  );\n};\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const Bubble = styled.div`\nbackground-color: ;\n  background-color: ${({alignRight}) => alignRight ? 'rgb(123,182,211)' : '#dedcde'};\n  margin: 0.35em;\n  padding: 1em;\n  display: inline-block;\n  color: ${({alignRight}) => alignRight ? 'rgb(255,255,255)' : 'rgb(110, 110, 110)'};\n  border-radius: 16px;\n  font-size: 18px;\n  -webkit-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n  -moz-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n  box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n`;\n\nexport const Paragraph = styled.div`\nmargin: 0;\n`;\n\nexport const Container = styled.div`\n  position: relative;\n  max-width: 75%;\n  :not(:first-child) > div {\n    border-top-right-radius: ${({alignRight}) => alignRight ? '0' : '16px'};\n    border-top-left-radius: ${({alignRight}) => alignRight ? '16px' : '0'};\n  }\n  :not(:last-child) > div {\n    border-bottom-right-radius: ${({alignRight}) => alignRight ? '0' : '16px'};\n    border-bottom-left-radius: ${({alignRight}) => alignRight ? '16px' : '0'};\n  }\n`;\n","// import React from 'react';\n\n/*\ntype: 'text' || 'image',\ndata: {\n  message: '',\n  image: '',\n}\n */\n\n// export default ({ message }) => (\n//   <div>{JSON.stringify(message)}</div>\n// );\n\nimport React from 'react';\nimport { Bubble, Container, Paragraph } from './MessageBubble.styles';\n\nexport default ({ text, alignRight }) => (\n  <Container alignRight={alignRight}>\n    <Bubble alignRight={alignRight}>\n      {/* {text} */}\n      {text.split('\\n').map((m, i) => <Paragraph key={i}>{m}</Paragraph>)}\n    </Bubble>\n  </Container>\n);\n","import React from 'react';\nimport Container from './MessageBubble.container';\nimport View from './MessageBubble.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const FriendMessageGroup = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-end;\n  padding: 0.75em;\n`;\n\nexport const SelfMessageGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: flex-end;\n  padding: 1em;\n`;\n\nexport const ChatServerMessageGroup = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 1em;\n  color: rgb(110,110,110);\n`;\n\nexport const ChatServerMessage = styled.div`\nmargin: 16px;\n`;\n","import React from 'react';\nimport { MessageBubble } from '../';\nimport {\n  ChatServerMessage,\n  ChatServerMessageGroup,\n  FriendMessageGroup,\n  SelfMessageGroup\n} from './MessageGroup.styles';\n\nexport default ({ messageGroup }) => {\n  switch (messageGroup.sender) {\n    case 'friend':\n      return <FriendMessageGroup>\n        <div style={{ padding: '0.125em', paddingRight: '0.75em' }}>\n          {/*<Avatar />*/}\n        </div>\n        <div>\n          {\n            messageGroup.messages.map((message, i) => (\n              <MessageBubble\n                key={i}\n                text={message.text}\n              />\n            ))\n          }\n        </div>\n      </FriendMessageGroup>\n    case 'self':\n      return <SelfMessageGroup>\n        {\n          messageGroup.messages.map((message, i) => (\n            <MessageBubble\n              key={i}\n              text={message.text}\n              alignRight\n            />\n          ))\n        }\n      </SelfMessageGroup>\n    case 'chat':\n      return <ChatServerMessageGroup>\n      {\n        messageGroup.messages.map((message, i) => (\n          <ChatServerMessage key={i}>{message.text}</ChatServerMessage>\n        ))\n      }\n      </ChatServerMessageGroup>\n    default: return <div></div>;\n  }\n}\n","import React from 'react';\nimport Container from './MessageGroup.container';\nimport View from './MessageGroup.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, chatlog, ...props }) => {\n  const conversation = chatlog.reduce((acc, curr) => {\n    if (acc.length <= 0 || acc[acc.length - 1].sender !== curr.sender) {\n      acc.push({\n        sender: curr.sender,\n        messages: []\n      });\n    }\n\n    // TODO: handle images\n    const text = curr.data.text;\n    if (text) {\n      acc[acc.length - 1].messages.push({ text });\n    }\n\n    return acc;\n  }, []);\n\n  return (\n    <View {...props} conversation={conversation} />\n  )\n};\n","import styled from 'styled-components';\n\nexport const StyledChatlog = styled.div`\n  flex: 1;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n","import React from 'react';\nimport {\n  MessageGroup,\n  Typing,\n} from '../';\nimport { StyledChatlog } from './Chatlog.styles';\n\nexport default class Chatlog extends React.Component {\n  render() {\n    return <StyledChatlog>\n      {\n        this.props.conversation.map((messageGroup, i) => (\n          <MessageGroup messageGroup={messageGroup} key={i} />\n        ))\n      }\n      {\n        this.props.isTyping ? <Typing /> : ''\n      }\n      <div style={{ float:\"left\", clear: \"both\" }}\n        ref={(el) => { this.messagesEnd = el; }}>\n      </div>\n    </StyledChatlog>\n  }\n\n  scrollToBottom = () => {\n    this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n  }\n\n  componentDidMount() {\n    this.scrollToBottom();\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom();\n  }\n};\n","import React from 'react';\nimport Container from './Chatlog.container';\nimport View from './Chatlog.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const AvatarImage = styled.img`\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n`;\n","import React from 'react';\nimport { AvatarImage } from './Avatar.styles';\n\nexport default ({ image }) => (\n  <div>\n    <AvatarImage src={image.src} />\n  </div>\n);\n","import React from 'react';\nimport Container from './Avatar.container';\nimport View from './Avatar.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, user: { avatar, username }, ...props }) => (\n  <View {...props} avatar={avatar} username={username} />\n);\n","import styled from 'styled-components';\n\nexport const HeaderLayout = styled.div`\n  height: 96px;\n  width: 100%;\n  border-bottom: 1px solid rgba( 0, 0, 0, 0.2 );\n  display: flex;\n  align-items: center;\n  padding: 1em;\n  box-shadow: 0px 0px 4px 2px rgba( 0, 0, 0, 0.2 );\n`;\n\nexport const UsernameText = styled.h1`\n  margin-left: 0.5em;\n  color: rgb(110, 110, 110);\n`;\n","import React from 'react';\nimport { Avatar } from '../';\nimport { HeaderLayout, UsernameText } from './Header.styles';\n\nexport default ({ avatar, username }) => (\n  <HeaderLayout>\n    <Avatar image={avatar} />\n    <UsernameText>{username}</UsernameText>\n  </HeaderLayout>\n);\n","import React from 'react';\nimport Container from './Header.container';\nimport View from './Header.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled, { keyframes } from 'styled-components';\n\n\nconst keyFrameAnimation = keyframes`\n  0% {\n    -webkit-transform:translateY(0px)\n  }\n  28% {\n    -webkit-transform:translateY(-10px)\n  }\n  44% {\n    -webkit-transform:translateY(0px)\n  }\n`;\n\nexport const StyledTiContainer = styled.div`\n  margin-left: 32px;\n  margin-bottom: 16px;\n`;\n\nexport const StyledTiBlock = styled.div`\n  align-items: center;\n  display: flex;\n  height: 16px;\n`;\n\nexport const StyledTiDot = styled.div`\n  -webkit-animation: ${keyFrameAnimation} 1.5s infinite ease-in-out;\n  border-radius: 50%;\n  display: inline-block;\n  height: 16px;\n  margin-right: 4px;\n  width: 16px;\n  background-color: rgb(85, 84, 99);\n  &:nth-child(1) {\n    -webkit-animation-delay: 200ms;\n  }\n  &:nth-child(2) {\n    -webkit-animation-delay: 300ms;\n  }\n  &:nth-child(3) {\n    -webkit-animation-delay: 400ms;\n  }\n`;\n","import React from 'react';\nimport { StyledTiContainer, StyledTiBlock, StyledTiDot } from './Typing.styles';\n\nexport default () => (\n  <StyledTiContainer>\n    <StyledTiBlock>\n      <StyledTiDot />\n      <StyledTiDot />\n      <StyledTiDot />\n    </StyledTiBlock>\n  </StyledTiContainer>\n);\n","import React from 'react';\nimport Container from './Typing.container';\nimport View from './Typing.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\n\nexport default ({ View, ...props }) => (\n  <View {...props} />\n);\n","import styled from 'styled-components';\n\nexport const StyledOptionsLayout = styled.div`\n  height: 200px;\n  width: 100%;\n  // border-top: 1px solid rgb(85, 84, 99);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: 1em;\n  box-shadow: 0px 0px 4px 2px rgba( 0, 0, 0, 0.2 );\n`;\n","import React from 'react';\nimport { StyledOptionsLayout } from './OptionsLayout.styles';\nimport { Button } from '../';\n\nexport default ({options, onOptionSelected}) => {\n  console.log('rendering OptionsLayoutView')\n  console.dir(options)\n  return options.length >= 2\n    ? <StyledOptionsLayout>\n      <Button optionId={options[0]} onOptionSelected={onOptionSelected} style={{ marginBottom: '0.5em' }} />\n      <Button optionId={options[1]} onOptionSelected={onOptionSelected} style={{ marginTop: '0.5em' }} />\n    </StyledOptionsLayout>\n  : <StyledOptionsLayout></StyledOptionsLayout>\n}\n","import React from 'react';\nimport Container from './OptionsLayout.container';\nimport View from './OptionsLayout.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\nimport { sendableOptions } from '../../assets/messages';\n\nexport default ({ View, optionId, onOptionSelected, ...props }) => {\n  console.log('rendering button container, optionId: ', optionId)\n  console.dir(sendableOptions)\n  return (\n    // TODO: support images\n    <View\n      content={sendableOptions[optionId].message.data.text}\n      onClick={() => onOptionSelected(optionId)}\n      {...props} />\n  );\n}\n","import styled from 'styled-components';\n\nexport const StyledButton = styled.button`\n  transition: all 0.25s;\n  width: 100%;\n  height: 50%;\n  color: rgb(123,182,211);\n  background-color: rgb(240, 240, 240);\n  border: 3px solid rgb(123,182,211);\n  border-radius: 48px;\n  font-weight: bold;\n  font-size: 20px;\n  &:focus {\n    outline: none;\n  }\n  cursor: pointer;\n  &:hover {\n    background-color: rgb(123,182,211);\n    color: white;\n    -webkit-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n    -moz-box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n    box-shadow: -4px 4px 0px 0px rgb(85, 84, 99);\n  }\n`;\n","import React from 'react';\nimport { StyledButton } from './Button.styles';\nimport { SOUNDS, playSound } from '../../services/audioService';\n\nexport default ({ content, onClick, style }) => (\n  <StyledButton\n    style={style}\n    onClick={() => {\n      playSound(SOUNDS.SEND_MESSAGE);\n      onClick();\n    }}\n  >\n    {content}\n  </StyledButton>\n);\n","import React from 'react';\nimport Container from './Button.container';\nimport View from './Button.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import styled from 'styled-components';\n\nexport const PageLayout = styled.div`\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const Layout = styled.div`\n  height: 100%;\n  max-width: 80ch;\n  width: 100%;\n  box-shadow: 0px 0px 4px 2px rgba( 0, 0, 0, 0.2 );\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background-color: rgb(240, 240, 240);\n`;\n","import React from 'react';\nimport { Chatlog, Header, OptionsLayout } from '../../components';\nimport { PageLayout, Layout } from './Home.styles';\n\nexport default ({ otherUser, chatlog, options, onOptionSelected, isTyping }) => (\n  <PageLayout>\n    <Layout>\n      <Header user={otherUser} />\n      <Chatlog chatlog={chatlog} isTyping={isTyping} />\n      <OptionsLayout options={options} onOptionSelected={onOptionSelected} />\n    </Layout>\n  </PageLayout>\n);\n","import React from 'react';\nimport Container from './Home.container';\nimport View from './Home.view';\n\nexport default props => (\n  <Container View={View} {...props} />\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","import React from 'react';\nimport 'normalize.css';\nimport './index.css';\nimport { Home } from './pages';\n// Even though it's not being used we should keep it here so that it initialises the state.\nimport { useGlobalState } from './services/stateService';\n\nexport default () => (\n  <Home />\n);\n"],"sourceRoot":""}